$(document).ready(function(){"use strict";var a=$("#upload-button"),b=$("#upload-input"),c=$("#images"),d=$("#remove-image-button"),e=$("#show-image-modal"),f=$("#gallery-id"),g=f.data("galleryId");a.on("click",function(a){a.preventDefault(),b.trigger("click")}),b.on("change",function(){for(var a=this.files,b=0;b<a.length;b++){var d=a[b],e=new Uploader(d,c);e.upload()}});var h;$(document).on("click",".card",function(a){if(a.preventDefault(),$(this).hasClass("uploading"))window.alertModal("上传中，请耐心等待...");else{var b=$(this).attr("data-name");h="//cdn.lazycoffee.com/"+$(this).attr("data-key")+"_w868";var c=$(this).attr("data-key");e.find("[data-key]").attr("data-key",c),e.find(".header").text(b),e.find("img").attr("src",h),e.modal("show")}}),$(document).on("click","[data-action=deleteItem]",function(a){a.preventDefault();var b=$(this).attr("data-key"),c=[2,4,6,7],f=new Uploader;d.html('<span class="glyphicon glyphicon-refresh spin" aria-hidden="true"></span>').prop("disabled",!0),f.removeItem(b,g,function(a){-1===c.indexOf(a.state)?d.html("删除失败").prop("disabled",!0):(d.html("删除成功").prop("disabled",!1),e.modal("hide"),$("[data-key="+b+"]").closest(".image").fadeOut(function(){$(this).remove()}))})}),e.on("hidden.bs.modal",function(){d.text("删除").prop("disabled",!1)})});