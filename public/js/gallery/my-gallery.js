"use strict";lcApp.controller("myGalleryCtr",["$scope",function(a){a.galleries=[],a.initGalleries=function(b){a.galleries.push(b)};var b=function(b){var c=[];a.galleries.forEach(function(a){c.push(a._id)}),a.currentGalleryIndex=c.indexOf(b)},c=$(".other-features-btn"),d=$("#removeGalleryModal"),e=$("#otherFeaturesModal"),f=$(".remove-gallery-btn"),g=$("#remove-gallery-confirmed"),h=0;c.on("click",function(){h=$(this).data("gallery"),b(h),e.modal("show"),console.log(a.galleries)}),f.on("click",function(){d.modal("show")}),g.on("click",function(a){a.preventDefault(),$(this).hasClass("disabled")?window.alertModal("删除中，请稍等..."):($(this).addClass("disabled loading"),$.post("/gallery/remove",{galleryId:h},function(a,b){"success"===b?3===a.state?$("#"+h).slideUp(function(){$(this).remove()}):window.alertModal("删除失败！"):window.alertModal("网络错误，删除失败。"),$(this).removeClass("disabled loading"),d.modal("hide")}))})}]);