"use strict";$(document).ready(function(){function a(a,b){this.file=a;var c=a.id,d=$("#"+c);0==d.length?(d=$("<div/>"),d.addClass("col-xs-3").attr("id",c).css({display:"none"}).html('<a href="#" class="thumbnail"><div class="progress"><div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="min-width:3em">0%</div></div></a>'),b.after(d)):d.slideDown(),this.$progressBar=d}document.getElementById("pre-upload"),document.getElementById("file-input"),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:"drop-area",uptoken_url:"/cdn/uptoken",unique_names:!0,domain:"http://cdn.lazycoffee.com/",container:"uploader",max_file_size:"10mb",flash_swf_url:"js/plupload/Moxie.swf",max_retries:3,dragdrop:!0,drop_element:"drop-area",chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(a,b){plupload.each(b,function(a){})},BeforeUpload:function(b,c){var d=$("#"+b.getOption("container")),e=new a(c,d),f=plupload.parseSize(b.getOption("chunk_size"));"html5"===b.runtime&&f&&e.setStatus("排队ing...")},UploadProgress:function(b,c){var d=$("#"+b.getOption("container")),e=new a(c,d);e.setProgress(c.percent)},FileUploaded:function(b,c,d){var e=new a(c);e.addImage(b,d)},Error:function(a,b,c){console.log("error"),console.log(a),console.log(b),console.log(c)},UploadComplete:function(){},Key:function(a,b){var c="";return c}}});a.prototype.setStatus=function(a){var b=this.$progressBar;b.find(".progress-bar").text(a)},a.prototype.setProgress=function(a){var b=this.$progressBar;b.find(".progress-bar").text(a+"%").stop(!0,!0).animate({width:a+"%"}).attr("aria-valuenow",a)},a.prototype.addImage=function(a,b){var c=this.$progressBar,d=a.getOption("domain"),e=JSON.parse(b),f=d+e.key,g='<a href="#" class="thumbnail"><img src="'+f+'-auto" alt="'+e.key+'" /></a>';c.html(g)}});