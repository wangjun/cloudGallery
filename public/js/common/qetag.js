function getEtag(a,b){function c(){if(!g.length)return"Fto5o-5ea0sNMlW_75VgGJCv2AcJ";var a=Buffer.concat(g,20*i);return i>1&&(h=150,a=e(a)),a=Buffer.concat([new Buffer([h]),a],a.length+1),a.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")}var d="buffer";"string"==typeof a?(a=require("fs").createReadStream(a),d="stream"):a instanceof require("stream")&&(d="stream");var e=function(a){var b=require("crypto"),c=b.createHash("sha1");return c.update(a),c.digest()},f=4194304,g=[],h=22,i=0;switch(d){case"buffer":var j=a.length;i=Math.ceil(j/f);for(var k=0;i>k;k++)g.push(e(a.slice(k*f,(k+1)*f)));process.nextTick(function(){b(c())});break;case"stream":var l=a;l.on("readable",function(){for(var a;a=l.read(f);)g.push(e(a)),i++}),l.on("end",function(){b(c())})}}window.getetag=getEtag;