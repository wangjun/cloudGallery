{% extends '../layouts/layout.html' %}

{% block css %}
<link rel="stylesheet" href="/css/gallery/my-gallery.css"/>
{% endblock %}

{% block js %}
<script src="/js/gallery/my-gallery.js"></script>
{% endblock %}

{% block body %}
    <div class="container">
        {% if galleries.length %}
            <h1>我的相簿</h1>
            <p>
                <a href="/gallery/add" class="btn btn-primary">新增相册</a>
                <button class="btn btn-default" type="button">设置相簿背景</button>
            </p>
            <hr/>
            {% for item in galleries %}
                <div class="col-sm-6 col-md-4" id="{{ item._id }}">
                    <div class="thumbnail">
                        {% if item.thumbnail %}
                            <img src="{{ item.thumbnail.url }}" alt="{{ item.thumbnail.name }}">
                        {% else %}
                            <img data-src="holder.js/242px200?text=相册头像">
                        {% endif %}
                        <div class="caption">
                            <h3>{{ item.title }}</h3>
                            {% if item.story %}
                                <p>{{ item.story }}</p>
                            {% endif %}
                            <p>
                                <a href="/gallery/{{ item._id }}" class="btn btn-primary">查看</a>
                                <a href="#" class="btn btn-success">分享</a>
                                <button type="button"
                                        class="btn btn-default"
                                        data-toggle="modal"
                                        data-target="#otherFeaturesModal"
                                        data-gallery="{{ item._id }}"
                                        id="other-features-btn">
                                    其他
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-center" id="no-gallery-text">你还没有创建作何相册，现在立即创建？</p>
            <p class="text-center"><a class="btn btn-primary" href="/gallery/add">创建相册</a></p>
        {% endif %}
    </div>
    {# other features modal #}
    <div class="modal fade" id="otherFeaturesModal" tabindex="-1" role="dialog" aria-labelledby="otherFeaturesModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="otherFeaturesModalLabel">相册的其他选项</h4>
                </div>
                <div class="modal-body">
                    <p class="text-muted">这里是相册的其他一些功能</p>
                    <button type="button"
                            class="btn btn-danger delete-gallery"
                            data-toggle="modal"
                            data-target="#removeGalleryModal"
                            >
                        删除相册
                    </button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    {# remove gallery confirmation modal #}
    <div class="modal fade" id="removeGalleryModal" tabindex="-1" role="dialog" aria-labelledby="removeGalleryModalLable">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="otherFeaturesModalLabel">确定删除相册吗？</h4>
                </div>
                <div class="modal-body">
                    <p class="text-muted">请考虑清楚，相册及里面的照片都会被删除，并且无法恢复。确定删除？</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-danger" id="remove-gallery-confirmed">确认删除</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

