{% extends '../layouts/layout.html' %}

{% block title %}{{ gallery.title }}{% endblock %}

{% block js %}
    <script src="/vendor/blueimp-load-image/js/load-image.all.min.js"></script>
    <script src="/js/gallery/gallery.min.js"></script>
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="/css/gallery/gallery.min.css"/>
{% endblock %}

{% block body %}
    <div class="container" ng-app="gallery">
        <h1>{{ gallery.title }}</h1>
        <p class="text-muted">{{ gallery.story }}</p>
        <form id="upload-form" action="/gallery/upload">
            <input id="upload-input" multiple type="file" class="hide"/>
        </form>
        <div>
            <div class="btn-group">
                <button id="upload-button" class="btn btn-primary">点击上传</button>
            </div>
            <div class="btn-group" id="share-btn">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                    分享 <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#" id="lovely-link">易记链接</a></li>
                    <li><a href="#">微信朋友圈</a></li>
                    <li><a href="#">新浪微博</a></li>
                    <li><a href="#">微信</a></li>
                </ul>
            </div>
        </div>
        <hr/>
        <div class="row" id="show">
            <p id="drop-here" class="text-muted text-center">把图片拖进浏览器即可上传。</p>
        </div>
    </div>
    <div class="hidden" id="gallery-id" data-gallery-id="{{ gallery._id.toHexString() }}"></div>

    <div class="modal fade" id="lovely-link-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">创建该相册的短链接</h4>
                </div>
                <form class="modal-body">
                    <div class="form-group">
                        <label for="lovely-link-result">将此链接发送给你的朋友:</label>
                        <p class="form-control-static">http://www.lazycoffee.com/gallery/<strong>[[ lovelyLink ]]</strong></p>
                    </div>
                    <div class="form-group">
                        <label for="lovely-link">易记链接(仅英文):</label>
                        <input name="lovely-link" type="text" ng-model="lovelyLink" class="form-control" placeholder="输入一个易记的英文名称，例如:james-australia-trip" />
                    </div>
                    <input type="hidden" value="{{ csrfToken }}"/>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary">确定</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}